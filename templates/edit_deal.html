{% extends "base.html" %}
{% block content %}
  <div class="container">
    <h2>Edit Deal</h2>
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, msg in messages %}
          <div class="alert alert-{{ category }} mt-2">{{ msg }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <form method="post" action="{{ url_for('edit_deal', deal_id=deal.id) }}">
      {{ form.hidden_tag() }}

      <div class="form-group">
        {{ form.customer_email.label }}
        {{ form.customer_email(class="form-control") }}
        {% if form.customer_email.errors %}
          <div class="error">{{ form.customer_email.errors[0] }}</div>
        {% endif %}
      </div>

<div class="form-group">
        {{ form.customer_website.label(class="control-label") }}
        {{ form.customer_website(class="form-control") }}
        {% if form.customer_website.errors %}
          <div class="error">{{ form.customer_website.errors[0] }}</div>
        {% endif %}
      </div>

      <div class="form-row">
        <div class="form-group col-md-6">
          {{ form.deal_value.label(class="control-label") }}
          {{ form.deal_value(class="form-control") }}
          {% if form.deal_value.errors %}
            <div class="error">{{ form.deal_value.errors[0] }}</div>
          {% endif %}
        </div>
        <div class="form-group col-md-6">
          {{ form.arr.label(class="control-label") }}
          {{ form.arr(class="form-control") }}
          {% if form.arr.errors %}
            <div class="error">{{ form.arr.errors[0] }}</div>
          {% endif %}
        </div>
      </div>

      <div class="form-group">
        {{ form.product_sold.label(class="control-label") }}
        {{ form.product_sold(class="form-control") }}
        {% if form.product_sold.errors %}
          <div class="error">{{ form.product_sold.errors[0] }}</div>
        {% endif %}
      </div>

      <div class="form-group">
        {{ form.description.label(class="control-label") }}
        {{ form.description(class="form-control", rows=4) }}
        {% if form.description.errors %}
          <div class="error">{{ form.description.errors[0] }}</div>
        {% endif %}
      </div>

      <div class="form-row">
        <div class="form-group col-md-6">
          {{ form.deal_cycle_length.label(class="control-label") }}
          {{ form.deal_cycle_length(class="form-control") }}
          {% if form.deal_cycle_length.errors %}
            <div class="error">{{ form.deal_cycle_length.errors[0] }}</div>
          {% endif %}
        </div>
        <div class="form-group col-md-6">
          {{ form.rate_me.label(class="control-label") }}
          {{ form.rate_me(class="form-control") }}
          {% if form.rate_me.errors %}
            <div class="error">{{ form.rate_me.errors[0] }}</div>
          {% endif %}
        </div>
      </div>
      
      {{ form.submit(class="btn btn-primary", value="Update Deal") }}
      <a href="{{ url_for('deals') }}" class="btn btn-secondary">Cancel</a>
    </form>
  </div>
{% endblock %}
